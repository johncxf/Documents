# 操作系统

常见知识点：

### 进程与线程

#### 进程

操作系统进行资源分配的基本单位

并发执行的程序在执行过程中分配和管理资源的基本单位，是一个动态概念，竞争计算机系统资源的基本单位

##### 优点：

- 能够很好的进行资源管理和保护

##### 缺点：

- 进程执行开销大

#### 线程

调度的基本单位

进程的一个执行单元，是进程内科调度实体。比进程更小的独立运行的基本单位，线程也被称为轻量级进程

为什么会有线程：请求多的时候如果为每一个请求创建一个进程，系统开销大响应用户请求效率低，因此引入线程

- 线程的执行过程是线性的，进程所拥有的资源只为改线状执行过程服务，一旦发生线程切换，这些资源需要被保护起来
- 线程分为单线程和多线程

##### 优点：

- 线程执行开销小
- 在一个已有进程中创建一个新线程比创建一个全新进程所需的时间要少许多
- 终止一个线程比终止一个进程花费的时间少
- 同一进程内线程间切换比进程间切换花费的时间少
- 线程提高了不同的执行程序间通信的效率

##### 缺点：

- 不利于资源的管理和保护

#### 进程和线程的区别

- 地址空间：同一进程的线程共享本进程的地址空间，而进程之间则是独立的地址空间

- 资源拥有：同一进程内的线程共享本进程的资源如内存、I/O、CPU，但是进程之间的资源是相互独立的

  > 一个进程崩溃后，在保护模式下不会对其他进程产生影响，但是一个线程崩溃整个进程都死掉。所以多进程要比多线程健壮
  >
  > 进程切换时，消耗的资源大，效率高

- 执行过程：每个独立的进程有一个程序运行的入口，顺序执行序列。但是线程不能独立运行

- 线程是处理器调度的基本单位，但是进程不是

- 两者均可并发执行

### 死锁

两个或者以上的进程在执行过程中，由于竞争资源或者由于彼此通信而造成的一种阻塞的现象，若无外力作用，他们将无法推进下去。此时称系统处于死锁状态或者系统产生了死锁，这些永远相互等待的进程称为死锁

#### 产生原因

- 系统资源的竞争
- 进程运行推进顺序不合适

#### 四个必要条件

- 互斥条件
- 请求与保持条件
- 不可剥夺条件
- 循环等待条件

#### 死锁避免

> 系统对进程发出的每一个系统能够满足的资源申请进行动态检查，并根据检查结果决定是否分配资源，如果分配后系统可能发生死锁，则不予分配，否则予以分配，这是一种保证系统不进入死锁状态的动态策略
>
> 如果操作系统能保证所有进程在有限时间内得到需要的全部资源，则系统处于安全状态否则系统是不安全的

#### 死锁预防

- 破坏“不可剥夺”条件
- 破坏“请求与保持条件”
- 破坏“循环等待”条件

